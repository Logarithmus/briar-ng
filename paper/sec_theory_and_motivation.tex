%! TEX root = course_report.tex

\section{Теоретическое обоснование разработки программного продукта} 
\label{sec:theory_and_motivation}

При возникновении идеи о создании нового программного продукта в первую очередь необходимо сформулировать цели и задачи, решаемые этим продуктом.
Также нужно исследовать рынок на предмет наличия уже существующих решений в рассматриваемой предметной области.
В случае наличия таких решений стоит проанализировать преимущества, которыми будет обладать новый программный продукт в сравнении с существующими решениями.
Только после этого можно приступать к проектированию пользовательского интерфейса, написанию программного кода и другим стадиям разработки.
В противном случае может оказаться, что разработанное приложение ничем не лучше существующих аналогов, а время на разработку потрачено впустую.

\subsection{Обоснование необходимости разработки приложения}
\label{sub:theory_and_motivation:motivation}

Предметом разработки данного курсового проекта является мобильное приложение для обмена короткими сообщениями (мессенджер).
На текущий момент существует очень много приложений с похожей функциональностью.
Примеры таких приложений:
\begin{itemize}
	\item Telegram;
	\item WhatsApp;
	\item Viber;
	\item Facebook Messenger;
	\item Signal и др.
\end{itemize}

Однако все популярные мессенджеры обладают общим недостатком: они работают только при наличии доступа к Интернету и обращаются к ограниченному кругу удалённых серверов.
Это означает, что при блокировке этих серверов третьей стороной (например, интернет-провайдером по требованию правительства) либо при возникновения сбоя в их работе, пользование приложением становится невозможным, даже если пользователи находятся в относительной близости друг от друга.

Стоит отметить, что угроза блокировки отдельных серверов либо полного отключения доступа в Интернет не является сугубо теоретической.
В разных странах (как правило, странах с авторитарными режимами) правительства прибегают к интернет-цензуре в той или иной форме.
Обычно их мишенью становятся интернет-ресурсы, критикующие власти и поддерживающие оппозицию.
Официальной причиной для ограничения доступа обычно становится <<борьба с терроризмом>>, <<противодействие иностранным агентам>> и т. п.
Поэтому в авторитарных странах журналистам, активистам и простым гражданам для получения объективной информации приходится прибегать к различным способам обхода блокировок.

Один из способов для обхода блокировок -- использование VPN.
При подключении через VPN весь интернет-трафик в зашифрованном виде проходит через специальный сервер, находящийся в другой стране.
Правительство, конечно, может блокировать VPN-сервера, однако им на замену быстро появляются новые, не заблокированные.

Другой способ обхода блокировок -- Tor Project (The Onion Router).
Главный принцип, лежащий в основе Tor -- т. н. <<луковичная маршрутизация>>.
Зашифрованный интернет-трафик проходит через несколько узлов, находящихся в разных странах мира.
Данное свойство позволяет скрыть изначальный источник запроса и делает очень сложной или невозможной идентификацию пользователя.
Для регулирующих органов заблокировать TOR намного труднее, чем VPN, по причине большого количества узлов сети, географически разделённых между собой \cite{tor_project}.

Иногда государства прибегают к полной блокировке Интернета, оставляя доступ только к локальным ресурсам.
В таких случаях ни VPN, ни Tor не помогают.
В качестве примеров полной или почти полной блокировки Интернета можно привести КНДР, а также Беларусь.
Так, в КНДР связь с другими странами недоступна для простых граждан \cite{amnesty_north_korea}.
В Беларуси также были прецеденты блокировок доступа к внешним интернет-ресурсам: например, после президентских выборов, с 9 по 12 августа 2020 г. не работал ни Tor, ни большинство сервисов VPN.
С тех пор блокировки Интернета, хотя и не такие обширные, происходят в стране почти каждое воскресенье \cite{hrw_belarus_censorship}.

В связи с вышеизложенным становится понятно, что в странах, в которых нарушается свобода слова и доступа к информации, существуют запрос на средство коммуникации, устойчивое к блокировкам.
Таким средством могут выступать рации и радиостанции, однако их использование требует приобретения дополнительного оборудования.
При этом смартфоны на сегодняшний день уже есть в наличии у большинства людей, даже в авторитарных странах.
Для связи между мобильными устройствами в условиях отсутствия Интернета можно прибегнуть к созданию децентрализованной беспроводной mesh-сети на основе Wi-Fi Direct и/или Bluetooth.

Существует всего несколько приложений для обмена сообщениями, работающих без Интернета и сигнала сотовой сети:
\begin{itemize}
	\item FireChat;
	\item Bridgefy;
	\item Briar.
\end{itemize}

FireChat использует Bluetooth для передачи данных между устройствами.
Протестующие в Гонконге в 2014 г. активно применяли FireChat для коммуникации.
К сожалению, по неизвестной причине на данный момент приложение FireChat не работает должным образом без подключения к Интернету.

Bridgefy -- альтернатива FireChat.
В отличие от последнего, он работает, однако связь возможна только через Bluetooth, Wi-Fi не поддерживается
Огромный недостаток Bridgefy заключается в требовании доступа к Интернету перед первым использованием.

Briar -- самый продвинутый вариант. Может работать по 3 каналам связи: через Tor, Wi-Fi и Bluetooth.
На практике связь работает не очень стабильно.
Устройства, находящиеся в непосредственной близости друг от друга, могут внезапно перестать видеть друг друга.
Ещё один недостаток Briar -- поддерживается отправка только текстовых сообщений.

Таким образом, ни одно из существующих решений не удовлетворяет в полной мере целями и задачам, описанным в задании на курсовой проект.
Поэтому и было разработано новое приложение.

\subsection{Технологии программирования, используемые для решения поставленных задач}
\label{sub:theory_and_motivation:tools}

При выборе технологий, используемых для разработки приложения, учитывалось несколько факторов, а именно:
\begin{itemize}
	\item наличие и качество документации;
	\item простота использования;
	\item популярность (чем популярнее технология, тем больше примеров её использования) и др.
\end{itemize}

\subsubsection{}
\label{subsub:theory_and_motivation:tools:java}

\textit{Java} -- популярный язык программирования со статической типизацией и автоматической сборкой мусора.
Именно на Java написан Android API Framework -- программный интерфейс, предназначенный для взаимодействия приложений с ОС Android.
Преимущества Java:
\begin{itemize}
	\item распространённость;
	\item развитая экосистема;
	\item простота изучения и использования.
\end{itemize}

Недостатки Java:
\begin{itemize}
	\item необходимость писать много повторяющегося шаблонного кода;
	\item многословный синтаксис;
	\item привязанность к парадигме ООП (к примеру, в Java нельзя объявить функцию вне класса) \cite{java_in_21_minutes}.
\end{itemize}

\subsubsection{}
\label{subsub:theory_and_motivation:tools:kotlin}

\textit{Kotlin} -- относительно новый язык программирования.
Как и Java, работает на платформе JVM.
Заимствовал много возможностей из функциональных языков программирования: функции высшего порядка, иммутабельность по умолчанию и др.
Kotlin лишён большинства недостатков Java, при этом код обычно получается намного проще и короче.
Согласно исследованию, проведённому в 2018 г. среди 50 самых популярных проектов на Kotlin и 50 проектов на Java, размещённых на GitHub, в среднем проекты на Kotlin содержат меньше кода с признаками проблем (англ. \textit{code smell}) \cite{java_vs_kotlin_2018}.
Наряду с Java, Kotlin является официально поддерживаемым языком для написания приложений под платформу Android.
Более того, в последнее время Google объявила Kotlin приоритетным языком для разработки новых Android-приложений \cite{android_kotlin_first}.
При этом поддержка Java также сохраняется: примеры в документации Android, как правило, приводятся на обоих языках программирования.

\subsubsection{}
\label{subsub:theory_and_motivation:tools:android_api_framework}

\textit{Android API Framework} -- набор библиотек функций, поставляемых вместе с ОС Android, служащий для создания пользовательского интерфейса, а также взаимодействия приложений с функциями устройства (например, воспроизведения аудио и видео, определения местоположения др.)

\subsubsection{}
\label{subsub:theory_and_motivation:tools:gradle}

\textit{Gradle} -- система сборки для Java, Kotlin, C++ и многих других языков программирования.
Gradle является официально поддерживаемой системой сборки для Android приложений \cite{android_build}.
В отличие от Maven, Gradle обладает намного более продвинутой системой инкрементальной компиляции \cite{gradle_vs_maven}.
За это Gradle расплачивается увеличенным потреблением памяти и долгой первоначальной сборкой.
Файлы конфигурации Gradle описываются на Groovy либо на Kotlin Gradle DSL.
По сравнению с XML-конфигурационными файлами в Maven, конфигурация Gradle намного более краткая и лучше читаемая.
В настоящее время Gradle постепенно переходит с Groovy на Kotlin Gradle DSL.
Основное преимущество Kotlin Gradle DSL заключается в статической типизации.
Как следствие, автодополнение в интегрированных средах разработки работает лучше, чем для Groovy \cite{kotlin_gradle_dsl_pros}.

\subsubsection{
\label{subsub:theory_and_motivation:tools:intellij_idea}

\textit{IntelliJ IDEA} -- интегрированная среда разработки от компании JetBrains.
Выпускается в двух редакциях: Community Edition (бесплатная с открытым исходным кодом) и Ultimate Edition (платная с закрытым кодом).
Преимущества Ultimate Edition -- наличие дополнительных плагинов для облегчения работы со Spring, базами данных и т. д.
IntelliJ IDEA Community Edition служит основой для Android Studio, официальной среды разработки приложений для платформы Android.
Использование Android Studio практически равноценно использованию IntelliJ IDEA с плагином Android.
Поэтому в целях экономии дискового пространства для разработки использовалась уже установленная ранее IntelliJ IDEA.
IntelliJ IDEA содержит широкие возможности для рефакторинга и интеллектуального автодополнения кода.
При первом открытии проекта IntelliJ IDEA производит его индексацию.
Данный процесс занимает довольно длительное время и очень сильно нагружает процессор.
Впоследствии IntelliJ IDEA использует результаты индексации для глубокого анализа кода и умного автодополнения \cite{intellij_idea_features}.


\subsubsection{Текстовый редактор NeoVIM}
\label{subsub:theory_and_motivation:tools:neovim}


